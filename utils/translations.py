"""
Translation system for Careflow Setup application.
Supports English, German, French, and Polish.
"""

TRANSLATIONS = {
    "en": {
        # Navigation
        "nav_dashboard": "Dashboard",
        "nav_buildings": "Buildings & Floor Plans",
        "nav_coverage_zones": "Coverage Zones",
        "nav_alert_zones": "Alert Zones",
        "nav_gateway_planning": "Gateway Planning",
        "nav_gateways": "Gateways",
        "nav_beacons": "Beacons",
        "nav_mqtt": "MQTT Configuration",
        "nav_live_tracking": "Live Tracking",
        "nav_history": "History Playback",
        "nav_import_export": "Import/Export",
        "nav_signal_monitor": "Signal Monitor",
        
        # Dashboard
        "dashboard_title": "Dashboard",
        "dashboard_subtitle": "Overview of your BLE Indoor Positioning System",
        "buildings": "Buildings",
        "gateways": "Gateways",
        "beacons": "Beacons",
        "floor_plans": "Floor Plans",
        "signal_processing_status": "Signal Processing Status",
        "gateway_status": "Gateway Status",
        "running": "Running",
        "stopped": "Stopped",
        "received": "Received",
        "stored": "Stored",
        "positions": "Positions",
        "signals": "signals",
        "no_gateways": "No gateways configured",
        
        # Buildings
        "buildings_title": "Buildings & Floor Plans",
        "add_building": "Add Building",
        "building_name": "Building Name",
        "address": "Address",
        "latitude": "Latitude",
        "longitude": "Longitude",
        "create_building": "Create Building",
        "floor_plans_title": "Floor Plans",
        "add_floor": "Add Floor",
        "floor_name": "Floor Name",
        "floor_number": "Floor Number",
        "upload_geojson": "Upload GeoJSON File",
        "save_floor": "Save Floor",
        "delete": "Delete",
        "edit": "Edit",
        "save": "Save",
        "cancel": "Cancel",
        "confirm_delete": "Confirm Delete",
        "no_buildings": "No buildings found. Add a building to get started.",
        "no_floors": "No floor plans for this building.",
        
        # Gateways
        "gateways_title": "Gateway Management",
        "add_gateway": "Add Gateway",
        "gateway_name": "Gateway Name",
        "mac_address": "MAC Address",
        "select_floor": "Select Floor",
        "x_position": "X Position (m)",
        "y_position": "Y Position (m)",
        "tx_power": "TX Power (dBm)",
        "path_loss": "Path Loss Exponent",
        "active": "Active",
        "inactive": "Inactive",
        "status": "Status",
        "last_seen": "Last Seen",
        "no_gateways_configured": "No gateways configured yet.",
        
        # Beacons
        "beacons_title": "Beacon Management",
        "add_beacon": "Add Beacon",
        "beacon_name": "Beacon Name",
        "beacon_type": "Beacon Type",
        "resource_type": "Resource Type",
        "device": "Device",
        "staff": "Staff",
        "asset": "Asset",
        "no_beacons": "No beacons registered.",
        
        # MQTT
        "mqtt_title": "MQTT Configuration",
        "broker_host": "Broker Host",
        "broker_port": "Broker Port",
        "username": "Username",
        "password": "Password",
        "topic": "Topic",
        "connect": "Connect",
        "disconnect": "Disconnect",
        "connected": "Connected",
        "disconnected": "Disconnected",
        "test_connection": "Test Connection",
        "save_config": "Save Configuration",
        
        # Live Tracking
        "live_tracking_title": "Live Tracking",
        "select_building": "Select Building",
        "auto_refresh": "Auto Refresh",
        "refresh_interval": "Refresh Interval (s)",
        "update_data": "Update Data",
        "no_positions": "No beacon positions available.",
        "last_update": "Last Update",
        
        # Zones
        "coverage_zones_title": "Coverage Zones",
        "alert_zones_title": "Alert Zones",
        "add_zone": "Add Zone",
        "zone_name": "Zone Name",
        "zone_type": "Zone Type",
        "target_accuracy": "Target Accuracy (m)",
        "priority": "Priority",
        "high": "High",
        "medium": "Medium",
        "low": "Low",
        "draw_zone": "Draw Zone",
        "save_zone": "Save Zone",
        "no_zones": "No zones defined.",
        
        # Gateway Planning
        "gateway_planning_title": "Gateway Planning",
        "plan_gateways": "Plan Gateways",
        "suggested_positions": "Suggested Positions",
        "coverage_analysis": "Coverage Analysis",
        "export_plan": "Export Plan",
        
        # Import/Export
        "import_export_title": "Import/Export",
        "import_data": "Import Data",
        "export_data": "Export Data",
        "select_format": "Select Format",
        "import": "Import",
        "export": "Export",
        
        # Signal Monitor
        "signal_monitor_title": "Signal Monitor",
        "signal_strength": "Signal Strength",
        "rssi": "RSSI",
        "timestamp": "Timestamp",
        
        # Common
        "loading": "Loading...",
        "error": "Error",
        "success": "Success",
        "warning": "Warning",
        "info": "Info",
        "close": "Close",
        "submit": "Submit",
        "reset": "Reset",
        "refresh": "Refresh",
        "actions": "Actions",
        "details": "Details",
        "settings": "Settings",
        "configuration": "Configuration",
        "name": "Name",
        "description": "Description",
        "created": "Created",
        "updated": "Updated",
        "signal_processor_running": "Signal Processor: Running",
        "signal_processor_stale": "Signal Processor: Stale",
        "signal_processor_stopped": "Signal Processor: Stopped",
        "signal_processor_not_init": "Signal Processor: Not initialized",
    },
    "de": {
        # Navigation
        "nav_dashboard": "Dashboard",
        "nav_buildings": "Gebäude & Grundrisse",
        "nav_coverage_zones": "Abdeckungszonen",
        "nav_alert_zones": "Alarmzonen",
        "nav_gateway_planning": "Gateway-Planung",
        "nav_gateways": "Gateways",
        "nav_beacons": "Beacons",
        "nav_mqtt": "MQTT-Konfiguration",
        "nav_live_tracking": "Live-Tracking",
        "nav_history": "Verlaufswiedergabe",
        "nav_import_export": "Import/Export",
        "nav_signal_monitor": "Signalmonitor",
        
        # Dashboard
        "dashboard_title": "Dashboard",
        "dashboard_subtitle": "Übersicht Ihres BLE Indoor-Positionierungssystems",
        "buildings": "Gebäude",
        "gateways": "Gateways",
        "beacons": "Beacons",
        "floor_plans": "Grundrisse",
        "signal_processing_status": "Signalverarbeitungsstatus",
        "gateway_status": "Gateway-Status",
        "running": "Läuft",
        "stopped": "Gestoppt",
        "received": "Empfangen",
        "stored": "Gespeichert",
        "positions": "Positionen",
        "signals": "Signale",
        "no_gateways": "Keine Gateways konfiguriert",
        
        # Buildings
        "buildings_title": "Gebäude & Grundrisse",
        "add_building": "Gebäude hinzufügen",
        "building_name": "Gebäudename",
        "address": "Adresse",
        "latitude": "Breitengrad",
        "longitude": "Längengrad",
        "create_building": "Gebäude erstellen",
        "floor_plans_title": "Grundrisse",
        "add_floor": "Etage hinzufügen",
        "floor_name": "Etagenname",
        "floor_number": "Etagennummer",
        "upload_geojson": "GeoJSON-Datei hochladen",
        "save_floor": "Etage speichern",
        "delete": "Löschen",
        "edit": "Bearbeiten",
        "save": "Speichern",
        "cancel": "Abbrechen",
        "confirm_delete": "Löschen bestätigen",
        "no_buildings": "Keine Gebäude gefunden. Fügen Sie ein Gebäude hinzu.",
        "no_floors": "Keine Grundrisse für dieses Gebäude.",
        
        # Gateways
        "gateways_title": "Gateway-Verwaltung",
        "add_gateway": "Gateway hinzufügen",
        "gateway_name": "Gateway-Name",
        "mac_address": "MAC-Adresse",
        "select_floor": "Etage auswählen",
        "x_position": "X-Position (m)",
        "y_position": "Y-Position (m)",
        "tx_power": "TX-Leistung (dBm)",
        "path_loss": "Pfadverlust-Exponent",
        "active": "Aktiv",
        "inactive": "Inaktiv",
        "status": "Status",
        "last_seen": "Zuletzt gesehen",
        "no_gateways_configured": "Noch keine Gateways konfiguriert.",
        
        # Beacons
        "beacons_title": "Beacon-Verwaltung",
        "add_beacon": "Beacon hinzufügen",
        "beacon_name": "Beacon-Name",
        "beacon_type": "Beacon-Typ",
        "resource_type": "Ressourcentyp",
        "device": "Gerät",
        "staff": "Personal",
        "asset": "Anlage",
        "no_beacons": "Keine Beacons registriert.",
        
        # MQTT
        "mqtt_title": "MQTT-Konfiguration",
        "broker_host": "Broker-Host",
        "broker_port": "Broker-Port",
        "username": "Benutzername",
        "password": "Passwort",
        "topic": "Thema",
        "connect": "Verbinden",
        "disconnect": "Trennen",
        "connected": "Verbunden",
        "disconnected": "Getrennt",
        "test_connection": "Verbindung testen",
        "save_config": "Konfiguration speichern",
        
        # Live Tracking
        "live_tracking_title": "Live-Tracking",
        "select_building": "Gebäude auswählen",
        "auto_refresh": "Auto-Aktualisierung",
        "refresh_interval": "Aktualisierungsintervall (s)",
        "update_data": "Daten aktualisieren",
        "no_positions": "Keine Beacon-Positionen verfügbar.",
        "last_update": "Letzte Aktualisierung",
        
        # Zones
        "coverage_zones_title": "Abdeckungszonen",
        "alert_zones_title": "Alarmzonen",
        "add_zone": "Zone hinzufügen",
        "zone_name": "Zonenname",
        "zone_type": "Zonentyp",
        "target_accuracy": "Zielgenauigkeit (m)",
        "priority": "Priorität",
        "high": "Hoch",
        "medium": "Mittel",
        "low": "Niedrig",
        "draw_zone": "Zone zeichnen",
        "save_zone": "Zone speichern",
        "no_zones": "Keine Zonen definiert.",
        
        # Gateway Planning
        "gateway_planning_title": "Gateway-Planung",
        "plan_gateways": "Gateways planen",
        "suggested_positions": "Vorgeschlagene Positionen",
        "coverage_analysis": "Abdeckungsanalyse",
        "export_plan": "Plan exportieren",
        
        # Import/Export
        "import_export_title": "Import/Export",
        "import_data": "Daten importieren",
        "export_data": "Daten exportieren",
        "select_format": "Format auswählen",
        "import": "Importieren",
        "export": "Exportieren",
        
        # Signal Monitor
        "signal_monitor_title": "Signalmonitor",
        "signal_strength": "Signalstärke",
        "rssi": "RSSI",
        "timestamp": "Zeitstempel",
        
        # Common
        "loading": "Laden...",
        "error": "Fehler",
        "success": "Erfolg",
        "warning": "Warnung",
        "info": "Info",
        "close": "Schließen",
        "submit": "Absenden",
        "reset": "Zurücksetzen",
        "refresh": "Aktualisieren",
        "actions": "Aktionen",
        "details": "Details",
        "settings": "Einstellungen",
        "configuration": "Konfiguration",
        "name": "Name",
        "description": "Beschreibung",
        "created": "Erstellt",
        "updated": "Aktualisiert",
        "signal_processor_running": "Signalverarbeitung: Läuft",
        "signal_processor_stale": "Signalverarbeitung: Veraltet",
        "signal_processor_stopped": "Signalverarbeitung: Gestoppt",
        "signal_processor_not_init": "Signalverarbeitung: Nicht initialisiert",
    },
    "fr": {
        # Navigation
        "nav_dashboard": "Tableau de bord",
        "nav_buildings": "Bâtiments & Plans",
        "nav_coverage_zones": "Zones de couverture",
        "nav_alert_zones": "Zones d'alerte",
        "nav_gateway_planning": "Planification des passerelles",
        "nav_gateways": "Passerelles",
        "nav_beacons": "Balises",
        "nav_mqtt": "Configuration MQTT",
        "nav_live_tracking": "Suivi en direct",
        "nav_history": "Historique",
        "nav_import_export": "Import/Export",
        "nav_signal_monitor": "Moniteur de signal",
        
        # Dashboard
        "dashboard_title": "Tableau de bord",
        "dashboard_subtitle": "Aperçu de votre système de positionnement intérieur BLE",
        "buildings": "Bâtiments",
        "gateways": "Passerelles",
        "beacons": "Balises",
        "floor_plans": "Plans d'étage",
        "signal_processing_status": "État du traitement du signal",
        "gateway_status": "État des passerelles",
        "running": "En cours",
        "stopped": "Arrêté",
        "received": "Reçu",
        "stored": "Stocké",
        "positions": "Positions",
        "signals": "signaux",
        "no_gateways": "Aucune passerelle configurée",
        
        # Buildings
        "buildings_title": "Bâtiments & Plans",
        "add_building": "Ajouter un bâtiment",
        "building_name": "Nom du bâtiment",
        "address": "Adresse",
        "latitude": "Latitude",
        "longitude": "Longitude",
        "create_building": "Créer le bâtiment",
        "floor_plans_title": "Plans d'étage",
        "add_floor": "Ajouter un étage",
        "floor_name": "Nom de l'étage",
        "floor_number": "Numéro d'étage",
        "upload_geojson": "Télécharger le fichier GeoJSON",
        "save_floor": "Enregistrer l'étage",
        "delete": "Supprimer",
        "edit": "Modifier",
        "save": "Enregistrer",
        "cancel": "Annuler",
        "confirm_delete": "Confirmer la suppression",
        "no_buildings": "Aucun bâtiment trouvé. Ajoutez un bâtiment pour commencer.",
        "no_floors": "Aucun plan pour ce bâtiment.",
        
        # Gateways
        "gateways_title": "Gestion des passerelles",
        "add_gateway": "Ajouter une passerelle",
        "gateway_name": "Nom de la passerelle",
        "mac_address": "Adresse MAC",
        "select_floor": "Sélectionner l'étage",
        "x_position": "Position X (m)",
        "y_position": "Position Y (m)",
        "tx_power": "Puissance TX (dBm)",
        "path_loss": "Exposant de perte de chemin",
        "active": "Actif",
        "inactive": "Inactif",
        "status": "État",
        "last_seen": "Dernière vue",
        "no_gateways_configured": "Aucune passerelle configurée.",
        
        # Beacons
        "beacons_title": "Gestion des balises",
        "add_beacon": "Ajouter une balise",
        "beacon_name": "Nom de la balise",
        "beacon_type": "Type de balise",
        "resource_type": "Type de ressource",
        "device": "Appareil",
        "staff": "Personnel",
        "asset": "Actif",
        "no_beacons": "Aucune balise enregistrée.",
        
        # MQTT
        "mqtt_title": "Configuration MQTT",
        "broker_host": "Hôte du courtier",
        "broker_port": "Port du courtier",
        "username": "Nom d'utilisateur",
        "password": "Mot de passe",
        "topic": "Sujet",
        "connect": "Connecter",
        "disconnect": "Déconnecter",
        "connected": "Connecté",
        "disconnected": "Déconnecté",
        "test_connection": "Tester la connexion",
        "save_config": "Enregistrer la configuration",
        
        # Live Tracking
        "live_tracking_title": "Suivi en direct",
        "select_building": "Sélectionner le bâtiment",
        "auto_refresh": "Actualisation automatique",
        "refresh_interval": "Intervalle d'actualisation (s)",
        "update_data": "Mettre à jour les données",
        "no_positions": "Aucune position de balise disponible.",
        "last_update": "Dernière mise à jour",
        
        # Zones
        "coverage_zones_title": "Zones de couverture",
        "alert_zones_title": "Zones d'alerte",
        "add_zone": "Ajouter une zone",
        "zone_name": "Nom de la zone",
        "zone_type": "Type de zone",
        "target_accuracy": "Précision cible (m)",
        "priority": "Priorité",
        "high": "Haute",
        "medium": "Moyenne",
        "low": "Basse",
        "draw_zone": "Dessiner la zone",
        "save_zone": "Enregistrer la zone",
        "no_zones": "Aucune zone définie.",
        
        # Gateway Planning
        "gateway_planning_title": "Planification des passerelles",
        "plan_gateways": "Planifier les passerelles",
        "suggested_positions": "Positions suggérées",
        "coverage_analysis": "Analyse de couverture",
        "export_plan": "Exporter le plan",
        
        # Import/Export
        "import_export_title": "Import/Export",
        "import_data": "Importer des données",
        "export_data": "Exporter des données",
        "select_format": "Sélectionner le format",
        "import": "Importer",
        "export": "Exporter",
        
        # Signal Monitor
        "signal_monitor_title": "Moniteur de signal",
        "signal_strength": "Force du signal",
        "rssi": "RSSI",
        "timestamp": "Horodatage",
        
        # Common
        "loading": "Chargement...",
        "error": "Erreur",
        "success": "Succès",
        "warning": "Avertissement",
        "info": "Info",
        "close": "Fermer",
        "submit": "Soumettre",
        "reset": "Réinitialiser",
        "refresh": "Actualiser",
        "actions": "Actions",
        "details": "Détails",
        "settings": "Paramètres",
        "configuration": "Configuration",
        "name": "Nom",
        "description": "Description",
        "created": "Créé",
        "updated": "Mis à jour",
        "signal_processor_running": "Processeur de signal: En cours",
        "signal_processor_stale": "Processeur de signal: Obsolète",
        "signal_processor_stopped": "Processeur de signal: Arrêté",
        "signal_processor_not_init": "Processeur de signal: Non initialisé",
    },
    "pl": {
        # Navigation
        "nav_dashboard": "Panel",
        "nav_buildings": "Budynki i plany pięter",
        "nav_coverage_zones": "Strefy zasięgu",
        "nav_alert_zones": "Strefy alarmowe",
        "nav_gateway_planning": "Planowanie bramek",
        "nav_gateways": "Bramki",
        "nav_beacons": "Beacony",
        "nav_mqtt": "Konfiguracja MQTT",
        "nav_live_tracking": "Śledzenie na żywo",
        "nav_history": "Odtwarzanie historii",
        "nav_import_export": "Import/Eksport",
        "nav_signal_monitor": "Monitor sygnału",
        
        # Dashboard
        "dashboard_title": "Panel",
        "dashboard_subtitle": "Przegląd systemu pozycjonowania wewnętrznego BLE",
        "buildings": "Budynki",
        "gateways": "Bramki",
        "beacons": "Beacony",
        "floor_plans": "Plany pięter",
        "signal_processing_status": "Status przetwarzania sygnału",
        "gateway_status": "Status bramek",
        "running": "Działa",
        "stopped": "Zatrzymany",
        "received": "Odebrano",
        "stored": "Zapisano",
        "positions": "Pozycje",
        "signals": "sygnały",
        "no_gateways": "Brak skonfigurowanych bramek",
        
        # Buildings
        "buildings_title": "Budynki i plany pięter",
        "add_building": "Dodaj budynek",
        "building_name": "Nazwa budynku",
        "address": "Adres",
        "latitude": "Szerokość geograficzna",
        "longitude": "Długość geograficzna",
        "create_building": "Utwórz budynek",
        "floor_plans_title": "Plany pięter",
        "add_floor": "Dodaj piętro",
        "floor_name": "Nazwa piętra",
        "floor_number": "Numer piętra",
        "upload_geojson": "Prześlij plik GeoJSON",
        "save_floor": "Zapisz piętro",
        "delete": "Usuń",
        "edit": "Edytuj",
        "save": "Zapisz",
        "cancel": "Anuluj",
        "confirm_delete": "Potwierdź usunięcie",
        "no_buildings": "Nie znaleziono budynków. Dodaj budynek, aby rozpocząć.",
        "no_floors": "Brak planów pięter dla tego budynku.",
        
        # Gateways
        "gateways_title": "Zarządzanie bramkami",
        "add_gateway": "Dodaj bramkę",
        "gateway_name": "Nazwa bramki",
        "mac_address": "Adres MAC",
        "select_floor": "Wybierz piętro",
        "x_position": "Pozycja X (m)",
        "y_position": "Pozycja Y (m)",
        "tx_power": "Moc TX (dBm)",
        "path_loss": "Wykładnik strat ścieżki",
        "active": "Aktywny",
        "inactive": "Nieaktywny",
        "status": "Status",
        "last_seen": "Ostatnio widziany",
        "no_gateways_configured": "Brak skonfigurowanych bramek.",
        
        # Beacons
        "beacons_title": "Zarządzanie beaconami",
        "add_beacon": "Dodaj beacon",
        "beacon_name": "Nazwa beacona",
        "beacon_type": "Typ beacona",
        "resource_type": "Typ zasobu",
        "device": "Urządzenie",
        "staff": "Personel",
        "asset": "Zasób",
        "no_beacons": "Brak zarejestrowanych beaconów.",
        
        # MQTT
        "mqtt_title": "Konfiguracja MQTT",
        "broker_host": "Host brokera",
        "broker_port": "Port brokera",
        "username": "Nazwa użytkownika",
        "password": "Hasło",
        "topic": "Temat",
        "connect": "Połącz",
        "disconnect": "Rozłącz",
        "connected": "Połączony",
        "disconnected": "Rozłączony",
        "test_connection": "Testuj połączenie",
        "save_config": "Zapisz konfigurację",
        
        # Live Tracking
        "live_tracking_title": "Śledzenie na żywo",
        "select_building": "Wybierz budynek",
        "auto_refresh": "Auto-odświeżanie",
        "refresh_interval": "Interwał odświeżania (s)",
        "update_data": "Aktualizuj dane",
        "no_positions": "Brak dostępnych pozycji beaconów.",
        "last_update": "Ostatnia aktualizacja",
        
        # Zones
        "coverage_zones_title": "Strefy zasięgu",
        "alert_zones_title": "Strefy alarmowe",
        "add_zone": "Dodaj strefę",
        "zone_name": "Nazwa strefy",
        "zone_type": "Typ strefy",
        "target_accuracy": "Docelowa dokładność (m)",
        "priority": "Priorytet",
        "high": "Wysoki",
        "medium": "Średni",
        "low": "Niski",
        "draw_zone": "Rysuj strefę",
        "save_zone": "Zapisz strefę",
        "no_zones": "Brak zdefiniowanych stref.",
        
        # Gateway Planning
        "gateway_planning_title": "Planowanie bramek",
        "plan_gateways": "Planuj bramki",
        "suggested_positions": "Sugerowane pozycje",
        "coverage_analysis": "Analiza zasięgu",
        "export_plan": "Eksportuj plan",
        
        # Import/Export
        "import_export_title": "Import/Eksport",
        "import_data": "Importuj dane",
        "export_data": "Eksportuj dane",
        "select_format": "Wybierz format",
        "import": "Importuj",
        "export": "Eksportuj",
        
        # Signal Monitor
        "signal_monitor_title": "Monitor sygnału",
        "signal_strength": "Siła sygnału",
        "rssi": "RSSI",
        "timestamp": "Znacznik czasu",
        
        # Common
        "loading": "Ładowanie...",
        "error": "Błąd",
        "success": "Sukces",
        "warning": "Ostrzeżenie",
        "info": "Info",
        "close": "Zamknij",
        "submit": "Wyślij",
        "reset": "Resetuj",
        "refresh": "Odśwież",
        "actions": "Akcje",
        "details": "Szczegóły",
        "settings": "Ustawienia",
        "configuration": "Konfiguracja",
        "name": "Nazwa",
        "description": "Opis",
        "created": "Utworzono",
        "updated": "Zaktualizowano",
        "signal_processor_running": "Procesor sygnału: Działa",
        "signal_processor_stale": "Procesor sygnału: Przestarzały",
        "signal_processor_stopped": "Procesor sygnału: Zatrzymany",
        "signal_processor_not_init": "Procesor sygnału: Nie zainicjowany",
    }
}

LANGUAGE_NAMES = {
    "en": "English",
    "de": "Deutsch",
    "fr": "Français",
    "pl": "Polski"
}

def get_text(key: str, lang: str = "en") -> str:
    """Get translated text for a given key and language."""
    if lang not in TRANSLATIONS:
        lang = "en"
    return TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS["en"].get(key, key))

def t(key: str) -> str:
    """Shorthand for getting translated text using session state language."""
    import streamlit as st
    lang = st.session_state.get("language", "en")
    return get_text(key, lang)
